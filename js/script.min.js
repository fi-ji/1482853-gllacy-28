var contactsLink = document.querySelector(".contacts__link"), feedbackPopup = document.querySelector(".feedback"), feedbackClose = feedbackPopup.querySelector(".modal__close"), feedbackForm = feedbackPopup.querySelector(".feedback__form"), feedbackName = feedbackPopup.querySelector("#name-field"), feedbackEmail = feedbackPopup.querySelector("#email-field"), feedbackLetter = feedbackPopup.querySelector("#letter-field"), isStorageSupport = !0, storage = ""; try { storage = localStorage.getItem("name") } catch (e) { isStorageSupport = "false" } contactsLink.addEventListener("click", function (e) { e.preventDefault(), feedbackPopup.classList.add("modal-show"), storage ? (feedbackName.value = storage, feedbackEmail.value = localStorage.getItem("email"), feedbackLetter.focus()) : feedbackName.focus() }), feedbackClose.addEventListener("click", function () { feedbackPopup.classList.remove("modal-show"), feedbackPopup.classList.remove("modal-error") }), feedbackForm.addEventListener("submit", function (e) { feedbackName.value && feedbackEmail.value && feedbackLetter.value ? (localStorage.setItem("name", feedbackName.value), localStorage.setItem("email", feedbackEmail.value)) : (e.preventDefault(), feedbackPopup.classList.remove("modal-error"), feedbackPopup.offsetWidth = feedbackPopup.offsetWidth, feedbackPopup.classList.add("modal-error")) }), window.addEventListener("keydown", function (e) { 27 === e.keyCode && feedbackPopup.classList.contains("modal-show") && (e.preventDefault(), feedbackPopup.classList.remove("modal-show"), feedbackPopup.classList.remove("modal-error")) }); var pageMain = document.querySelector(".page"), sliderControls = document.querySelectorAll(".slider__controls-btn"), sliderItems = document.querySelectorAll(".slider__item"), sliderControlsArr = Array.from(sliderControls); function removeClassSliders() { sliderControls.forEach(e => { e.classList.remove("slider__controls-btn--active") }), sliderItems.forEach(e => { e.classList.remove("slider__item--active") }) } function init() { var e = new ymaps.Map("map", { center: [59.939275, 30.329199], zoom: 16 }), a = new ymaps.Placemark([59.938635, 30.323118], { hintContent: "Мы здесь!", balloonContentHeader: '<img src="img/map-logo.svg" width="154" height="64" alt= "Gllacy Shop"' }, { iconLayout: "default#image", iconImageHref: "img/map-pin.svg", iconImageSize: [80, 140], iconImageOffset: [-40, -140] }); e.geoObjects.add(a), e.behaviors.disable("scrollZoom") } sliderControls.forEach(e => { e.addEventListener("click", function () { removeClassSliders(), this.classList.add("slider__controls-btn--active"), sliderItems[sliderControlsArr.indexOf(this)].classList.add("slider__item--active"), pageMain.dataset.index = sliderControlsArr.indexOf(this) }) }), ymaps.ready(init);